# Internationalization (i18n)

This document covers the internationalization setup in the LeafInk application, including multi-language support and type-safe translations.

## Overview

The application uses `next-i18next` for internationalization, supporting multiple languages with type-safe translation keys and IntelliSense support.

## Supported Languages

- ðŸ‡¬ðŸ‡§ **English (en)** - Default language
- ðŸ‡ªðŸ‡¸ **Spanish (es)**
- ðŸ‡«ðŸ‡· **French (fr)**

## Configuration

### Files

- **`next-i18next.config.js`** - Main i18n configuration
- **`next.config.ts`** - Includes i18n settings
- **`public/locales/{locale}/common.json`** - Translation files for each language
- **`src/types/i18next.d.ts`** - TypeScript type declarations for type-safe translations

## Usage

### Basic Translation

```tsx
import { useTranslation } from 'next-i18next';

export default function MyComponent() {
  const { t } = useTranslation('common');

  return (
    <div>
      <h1>{t('welcome')}</h1>
      <p>{t('description')}</p>
    </div>
  );
}
```

### Page Setup

Pages that use translations must include `getStaticProps`:

```tsx
import { serverSideTranslations } from 'next-i18next/serverSideTranslations';
import { GetStaticProps } from 'next';

export const getStaticProps: GetStaticProps = async ({ locale }) => {
  return {
    props: {
      ...(await serverSideTranslations(locale ?? 'en', ['common'])),
    },
  };
};
```

### Language Switcher

Use the built-in `LanguageSwitcher` component:

```tsx
import LanguageSwitcher from '@/components/LanguageSwitcher';

<LanguageSwitcher />;
```

## Type Safety

The application includes TypeScript type declarations that provide:

- âœ… **IntelliSense** - Autocomplete for translation keys
- âœ… **Type Errors** - Compile-time errors for invalid keys
- âœ… **Refactoring Support** - Safe renaming of translation keys

### Adding New Translation Keys

1. **Add to all locale files:**

   ```json
   // public/locales/en/common.json
   {
     "welcome": "Welcome to LeafInk",
     "your_new_key": "Your new text"
   }
   ```

2. **Update TypeScript types:**

   ```typescript
   // src/types/i18next.d.ts
   declare module 'i18next' {
     interface CustomTypeOptions {
       resources: {
         common: {
           welcome: string;
           your_new_key: string; // Add here
         };
       };
     }
   }
   ```

3. **Restart TypeScript server:**
   - Press `Cmd+Shift+P` / `Ctrl+Shift+P`
   - Select "TypeScript: Restart TS Server"

## Adding New Languages

1. **Update configuration:**

   ```javascript
   // next-i18next.config.js
   module.exports = {
     i18n: {
       defaultLocale: 'en',
       locales: ['en', 'es', 'fr', 'de'], // Add 'de' for German
     },
   };
   ```

2. **Create translation file:**

   ```
   public/locales/de/common.json
   ```

3. **Add to LanguageSwitcher:**

   ```typescript
   // src/components/LanguageSwitcher.tsx
   const languages = [
     { code: 'en', name: 'English', flag: 'ðŸ‡¬ðŸ‡§' },
     { code: 'es', name: 'EspaÃ±ol', flag: 'ðŸ‡ªðŸ‡¸' },
     { code: 'fr', name: 'FranÃ§ais', flag: 'ðŸ‡«ðŸ‡·' },
     { code: 'de', name: 'Deutsch', flag: 'ðŸ‡©ðŸ‡ª' }, // Add here
   ];
   ```

4. **Restart dev server:**
   ```bash
   yarn dev
   ```

## URL Structure

- Default locale: `/page` (English)
- Other locales: `/{locale}/page`
  - Spanish: `/es/page`
  - French: `/fr/page`

## Testing

Visit `/playground/i18n` to test the language switcher and see translations in action.

## Best Practices

1. **Always provide translations for all languages** - Missing keys will display the key name
2. **Use descriptive key names** - `user_profile_title` instead of `title1`
3. **Keep translations in sync** - Ensure all locale files have the same keys
4. **Leverage TypeScript** - Let IntelliSense guide you to valid keys
5. **Namespace translations** - Use different namespaces for different sections (e.g., `common`, `auth`, `dashboard`)
